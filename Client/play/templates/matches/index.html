<div class="container-fluid ng-cloak" layout-padding layout="column" ng-cloak>
	<div layout="row">
		<div layout="column" flex="100">
			<div layout="row" class="height600">
				<div layout="column" flex="100">
					<md-tabs  md-selected="currentTab"
					md-stretch-tabs="always" class="height100perc" ng-if="(games |keylength)>0">
						<md-tab label="all matches">
							<md-content>
								<div layout="row" class="overflowScroll">
									<div layout="column" flex="100">
										<md-list flex ng-show="msCtrl.loaded" ng-init=$scope>
											<md-list-item
												class=" md-3-line animate-repeat whiteBg mrg5b mrg5r shadowed-box"						
												ng-repeat-start="boardgame in games |orderObjectBy:'lastMatchTime':true | filter:{name:query}"
												ng-click="msCtrl.setVisible(boardgame.bggId)" ng-if="boardgame.hasOwnProperty('matches')">
												<img ng-src="{{boardgame.thumbnail}}" class="md-avatar" alt="match {{boardgame.name}}" />
												<div layout="column">
													<div layout="row">
														<h3> {{boardgame.name}}</h3>
													</div>
													<div layout="row">
														<i>{{boardgame.matches | keylength}} matches</i>
													</div>
												</div>
												<i 
												ng-if="user.profile_details.favourites[boardgame.bggId]"
												aria-label="remove favourite"
												class="icon-heart md-secondary" 
												md-colors="{color: 'myTheme-accent'}"
												ng-click="msCtrl.toggleFavourite(boardgame)"></i>
												<i 
												ng-if="!user.profile_details.favourites[boardgame.bggId]" 
												aria-label="add favourite"
												class="icon-heart-o md-secondary"  
												md-colors="{color: 'myTheme-accent'}"
												ng-click="msCtrl.toggleFavourite(boardgame)"></i>
											</md-list-item>
											
											<md-list-item 
											ng-if="boardgame.visible"
											class=" md-3-line mrg50l whiteBg mrg5b mrg5r shadowed-box" ng-cloak						
											ng-repeat-end ng-repeat="match in boardgame.matches | orderObjectBy:'-time'"
											ng-href="#/matches/{{match.key}}"
											>

												<img ng-src="{{boardgame.thumbnail}}" class="md-avatar" alt="match {{boardgame.name}}" />
												<div layout="column">
													<div layout="row">
														<h3 ng-if="match.name.length == 0"> Match {{key}}</h3>
														<h3 ng-if="match.name.length > 0">{{match.name}}</h3>
													</div>
													<div layout="row" class="size-14">
														<i>{{match.time | date:"EEEE, MMMM d, y, H:mm in"}} {{match.location}}</i>
													</div>
												</div>
											</md-list-item>
										</md-list>
									</div>
								</div>
							</md-content>
						</md-tab>
						
						<md-tab label="Programmed matches">
							<md-content>
								<div layout="row" class="overflowScroll">
									<div layout="column" flex="100">
										<md-list flex ng-show="msCtrl.loaded" ng-init=$scope>
											<md-list-item
												class=" md-3-line animate-repeat whiteBg mrg5b mrg5r shadowed-box"						
												ng-repeat-start="boardgame in (games |orderObjectBy:'lastMatchTime':true | filter:{name:query} | filter: msCtrl.timeGreaterThanGame)"
												ng-click="msCtrl.setVisible(boardgame.bggId)" ng-if="boardgame.hasOwnProperty('matches')">
												<img ng-src="{{boardgame.thumbnail}}" class="md-avatar" alt="match {{boardgame.name}}" />
												<div layout="column">
													<div layout="row">
														<h3> {{boardgame.name}}</h3>
													</div>
												</div>
												<i 
												ng-if="user.profile_details.favourites[boardgame.bggId]"
												aria-label="remove favourite"
												class="icon-heart md-secondary" 
												md-colors="{color: 'myTheme-accent'}"
												ng-click="msCtrl.toggleFavourite(boardgame)"></i>
												<i 
												ng-if="!user.profile_details.favourites[boardgame.bggId]" 
												aria-label="add favourite"
												class="icon-heart-o md-secondary"  
												md-colors="{color: 'myTheme-accent'}"
												ng-click="msCtrl.toggleFavourite(boardgame)"></i>
											</md-list-item>
											
											<md-list-item 
											ng-if="boardgame.visible"
											class=" md-3-line mrg50l whiteBg mrg5b mrg5r shadowed-box" ng-cloak						
											ng-repeat-end ng-repeat="match in boardgame.matches | orderObjectBy:'-time' | filter: msCtrl.timeGreaterThanMatch"
											ng-href="#/matches/{{match.key}}"
											>

												<img ng-src="{{boardgame.thumbnail}}" class="md-avatar" alt="match {{boardgame.name}}" />
												<div layout="column">
													<div layout="row">
														<h3 ng-if="match.name.length == 0"> Match {{key}}</h3>
														<h3 ng-if="match.name.length > 0">{{match.name}}</h3>
													</div>
													<div layout="row" class="size-14">
														<i>{{match.time | date:"EEEE, MMMM d, y, H:mm in"}} {{match.location}}</i>
													</div>
												</div>
											</md-list-item>
										</md-list>
									</div>
								</div>
							</md-content>
						</md-tab>
					</md-tabs>
					<div ng-if="(games | keylength) == 0" layout="column" flex layout-align="center center">
						<div layout="row" class="size-72 mrg20b">:(</div>
						<div layout="row" class="mrg20b"><h1>You didn't play any match</h1></div>	
						<div layout="row" class="mrg20b">
							<md-button 
					          		aria-label="Boardgames list" 
					          		class="md-fab md md-raised md-primary" 
									 ng-click="showPopup($event, user.uid, 'matches')">
					            <i class="icon-plus-1 size-16"></i>
					        </md-button>
						</div>	
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="container-fluid" layout="column" ng-cloak>
	<div id="boardgameImg" layout="row" layout-xs="column" flex="noshrink" back-img-boardgame="{{bCtrl.boardgame.image}}"" class="height150 relative shadowed-box borderAccent">
		<div id="shade" layout="column" flex>
			<div class="pad10l absolute9-1">
				<div layout="row" class="height100perc">
					<div layout="column" class="size-30 clickable whiteTxt" flex="100" layout-align="center end" ng-href="#/boardgames/{{bCtrl.boardgame.bggId}}">
						{{bCtrl.boardgame.name}}
					</div>
				</div> 
			</div>
			<div layout="column" class="blue-grey" flex>	
				<div layout="row">	
					<div layout="column" class="whiteTxt" flex="60">	
						<div layout="row" class="size-14 pad20" layout-align="start center">
							<div 
								layout="column" 
								flex="50" 
								class="pad10l clickable height30">
								<div layout="row" class="height100perc">
									<div layout="column" flex="20" layout-align="center center" >
										<i class="size-24 icon-puzzle">
											<md-tooltip md-direction="top" md-delay="200">Minute played</md-tooltip>
										</i>
									</div>
									<div layout="column" flex="80">
										<div layout="row" flex>
											<div layout="column" flex="10" layout-align="center start">
												<h3>{{bCtrl.match_played}}</h3>
											</div>
											<div layout="column"  flex="90" layout-align="center start">
												<h3>Match played</h3>
											</div>
										</div>
									</div>
								</div>
							</div>

						</div>
						<div layout="row" class="size-14 pad20" layout-align="start center">
							<div 
								layout="column" 
								flex="50" 
								class="pad10l clickable height30">
								<div layout="row" class="height100perc">
									<div layout="column" flex="20" layout-align="center center" >
										<i class="size-21 icon-trophy-2">
											<md-tooltip md-direction="top" md-delay="200">Match won</md-tooltip>
										</i>
									</div>
									<div layout="column" flex="80">
										<div layout="row" flex>
											<div layout="column" flex="10" layout-align="center start">
												<h3>{{bCtrl.match_won}} </h3>
											</div>
											<div layout="column"  flex="90" layout-align="center start">
												<h3>Match won</h3>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div layout="row" class="size-14 pad20" layout-align="start center">
							<div 
								layout="column" 
								flex="50" 
								class="pad10l clickable height30">
								<div layout="row" class="height100perc">
									<div layout="column" flex="20" layout-align="center center" >
										<i class="size-18 icon-hourglass">
											<md-tooltip md-direction="top" md-delay="200">Minute played</md-tooltip>
										</i>
									</div>
									<div layout="column" flex="80">
										<div layout="row" flex>
											<div layout="column" flex="10" layout-align="center start">
												<h3>-</h3>
											</div>
											<div layout="column"  flex="90" layout-align="center start">
												<h3>Minute played</h3>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					
					<div layout="column"  flex="40" class="relative" layout-align="center end">
						<div layout="row" class="absolute10" flex="none">
							<div class="circleBase imgBoardgame hideScrollbar shadowed-box clickable" ng-click="showImage($event, bCtrl.boardgame.image)">
								<div class="circleBase imgBoardgame" layout-align="center center" back-img="{{bCtrl.boardgame.image}}">
									<div class="circleBase"></div>
								</div> 
							</div>
							<md-button 
								aria-label="Edit match info" 
								class="md-fab absolute">
								<i ng-if="user.profile_details.favourites[bCtrl.boardgame.bggId]" 
								class="icon-heart"
								ng-click="bCtrl.toggleFavourite(bCtrl.boardgame)">
									<md-tooltip md-direction="top" md-delay="200">Remove favourite</md-tooltip>
								</i>

								<i 
								ng-if="!user.profile_details.favourites[bCtrl.boardgame.bggId]" 
								class="icon-heart-o "
								ng-click="bCtrl.toggleFavourite(bCtrl.boardgame)">
									<md-tooltip md-direction="top" md-delay="200">Add favourite</md-tooltip>
								</i>
							</md-button>
						</div>
					</div>
					
				</div>
			</div>
		</div>
	</div>
	<div layout="row" flex="grow">
		<div layout="column" flex="100">
			<md-tabs  md-selected="0" flex id="boardgameTabs">
				<md-tab label="Basic info">
					<md-content>
						<div layout="row">
							<div layout="column" class="blue-grey pad20l pad20r" flex="100">
								<div layout="row">
									<div layout="column" flex="100">
										<div layout="row" class="size-14" layout-wrap>
											<div 
												layout="column" 
												flex-gt-xs 
												flex-xs="100"
												class="shadowed-box whiteBg pad10l height60 clickable mrg10t">
												<div layout="row" class="height100perc">
													<div layout="column" flex="20" layout-align="center center" >
														<i class="size-18 icon-star" md-colors="{color: 'myTheme-accent'}" >
															<md-tooltip md-direction="top" md-delay="200">Average vote</md-tooltip>
														</i>
													</div>
													<div layout="column" flex="80" layout-align="center center" >
														<h2>{{bCtrl.boardgame.average | number:2}}</h2>
													</div>
												</div>
											</div>
											<div 
												layout="column" 
												flex-gt-xs
												flex-xs="100"
												class="shadowed-box whiteBg pad10l height60 clickable mrg0lxs mrg10l mrg10t">
												<div layout="row" class="height100perc">
													<div layout="column" flex="20" layout-align="center center" >
														<i class="size-18 icon-calendar" md-colors="{color: 'myTheme-accent'}" >
															<md-tooltip md-direction="top" md-delay="200">Publishing year</md-tooltip>
														</i>
													</div>
													<div layout="column" flex="80" layout-align="center center" >
														<h2>{{bCtrl.boardgame.yearpublished}}</h2>
													</div>
													
												</div>
											</div>
											<div 
												layout="column" 
												flex-gt-xs 
												flex-xs="100"
												class="shadowed-box whiteBg pad10l height60 clickable mrg0lxs mrg10l mrg10t">
												<div layout="row" class="height100perc">
													<div layout="column"  flex="20" layout-align="center center" >
														<i class="size-18 icon-hourglass" md-colors="{color: 'myTheme-accent'}" >
															<md-tooltip md-direction="top" md-delay="200">Typical playtime</md-tooltip>
														</i>
													</div>
													<div layout="column" flex="80" layout-align="center center" >
														<h2>{{bCtrl.boardgame.playingtime}} min</h2>
													</div>
												</div>
												
											</div>
										</div>
										<div layout="row" class="mrg10t mrg10b">

											<div layout="column" flex="50">
												<div layout="row">
													<div layout="column" class="md-body-2" layout-align="center start">
														<strong>CATEGORIES</strong>
													</div>
													<md-button layout="column" layout-align="center start" class="md-primary" ng-repeat="(key, category) in bCtrl.boardgame.categories" ng-click="goTo('categories/'+key)">
														{{category.name}}
													</md-button>
												</div>
											</div>
											<div layout="column" flex="50">
												<div layout="row">
													<div layout="column" class="md-body-2" layout-align="center start">
														<strong>DESIGNERS</strong>
													</div>
													<md-button layout="column" layout-align="center start" class="md-accent" ng-repeat="(key, designer) in bCtrl.boardgame.designers" ng-click="goTo('designers/'+key)">
														{{designer.name}}
													</md-button>
												</div>
											</div>

										</div>
									</div>
								</div>
								<div layout="row" class="md-body-2">
									<strong>DESCRIPTION</strong>
								</div>
								<div layout="row">
									<div layout="column" flex="100" class=" shadowed-box whiteBg pad20l pad20r">
										<div layout="row" class="size-14 pad20t pad20b">
											<div layout="column" flex="100" ng-bind-html="bCtrl.boardgame.description"></div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</md-content>
				</md-tab>
				<md-tab label="Expansions" ng-if="(bCtrl.boardgame.is_expanded_by | keylength) > 0">
					<md-content class="pad10l pad10r pad10t">
						<md-list>
							<md-list-item
								class=" md-1-line animate-repeat whiteBg mrg5b mrg5r shadowed-box"                   
								ng-repeat="(key,boardgame) in bCtrl.boardgame.is_expanded_by"
								ng-href="#/boardgames/{{key}}">
								<img ng-src="{{boardgame.image}}" class="md-avatar" alt="{{boardgame.name}}" />
								<div layout="column">
									<div layout="row">
										<h4> {{boardgame.name}}</h4>
									</div>
								</div>
								<i 
								aria-label="remove favourite"
								ng-if="user.profile_details.favourites[boardgame.bggId]" 
								class="icon-heart md-secondary" 
								md-colors="{color: 'myTheme-accent'}"
								ng-click="hCtrl.toggleFavourite(boardgame)">
									<md-tooltip md-direction="left" md-delay="200">Remove favourite</md-tooltip>
								</i>
								<i 
								aria-label="add favourite"
								ng-if="!user.profile_details.favourites[boardgame.bggId]" 
								class="icon-heart-o md-secondary" 
								md-colors="{color: 'myTheme-accent'}"
								ng-click="hCtrl.toggleFavourite(boardgame)">
									<md-tooltip md-direction="left" md-delay="200">Add favourite</md-tooltip>
								</i>
							</md-list-item>
						</md-list>
					</md-content>
				</md-tab>
				<md-tab label="Expands" ng-if="(bCtrl.boardgame.expands | keylength) > 0">
					<md-content class="pad10l pad10r pad10t">
						<md-list>
							<md-list-item
								class=" md-1-line animate-repeat whiteBg mrg5b mrg5r shadowed-box"                   
								ng-repeat="(key,boardgame) in bCtrl.boardgame.expands"
								ng-href="#/boardgames/{{key}}">
								<img ng-src="{{boardgame.image}}" class="md-avatar" alt="{{boardgame.name}}" />
								<div layout="column">
									<div layout="row">
										<h4> {{boardgame.name}}</h4>
									</div>
								</div>
								<i 
								aria-label="remove favourite"
								ng-if="user.profile_details.favourites[boardgame.bggId]" 
								class="icon-heart md-secondary" 
								md-colors="{color: 'myTheme-accent'}"
								ng-click="hCtrl.toggleFavourite(boardgame)">
									<md-tooltip md-direction="left" md-delay="200">Remove favourite</md-tooltip>
								</i>
								<i 
								aria-label="add favourite"
								ng-if="!user.profile_details.favourites[boardgame.bggId]" 
								class="icon-heart-o md-secondary" 
								md-colors="{color: 'myTheme-accent'}"
								ng-click="hCtrl.toggleFavourite(boardgame)">
									<md-tooltip md-direction="left" md-delay="200">Add favourite</md-tooltip>
								</i>
							</md-list-item>
						</md-list>
					</md-content>
				</md-tab>
				




				<md-tab label="Match played">
					<md-content  class="pad10l pad10r pad10t">
							<div layout="row">
								<md-list flex ng-if="bCtrl.matches.length > 0">
								 	<md-list-item
									class=" md-2-line animate-repeat whiteBg mrg5b mrg5r shadowed-box" 
									ng-href="#/matches/{{match.$id}}"
									ng-repeat="match in bCtrl.matches | filter:{location:query}" ng-click="null">
										<img ng-src="{{bCtrl.boardgame.thumbnail}}?100" class="md-avatar" alt="{{bCtrl.boardgame.name}}" />
										<div layout="column">
											<div layout="row">
												<h3 ng-if="match.name.length == 0">Match {{match.$id}}</h3>
												<h3 ng-if="match.name.length > 0">{{match.name}}</h3>
											</div>
											<div layout="row" class="size-14">
												<i>{{match.time | date:"EEEE, MMMM d, y, H:mm in"}} {{match.location}}</i>
											</div>
										</div>
										
									</md-list-item>
								</md-list>
								<div layout="column" layout-align="center center" ng-if="bCtrl.matches.length == 0" flex="100">
									<div layout="row" class="size-72 mrg20b">:(</div>
									<div layout="row" class="mrg20b"><h1 class="center-align">Do you like this game? Play it!</h1></div>
									<div layout="row" class="blue-grey clickable decoNone" ng-click="showPopup($event, user_pk, 'matches', {display:bCtrl.boardgame.name, value:bCtrl.boardgame.name.toLowerCase(), id:bCtrl.boardgame.pk, thumbnail:bCtrl.boardgame.thumbnail, expansions:bCtrl.boardgame.expansions})"><h2><i class="fa fa-plus mrg10r"></i> Add your first match</h2></div>
								</div>
							</div>
					</md-content>
				</md-tab>

				<md-tab label="Stats">
					<md-content>
						<div layout="row">
							<div layout="column" flex="45" class="mrg30 height500 whiteBg shadowed-box">
								<div layout="row" class="pad10" layout-align="center center">
									<h2 class="md-title">PERFORMANCES</h2>
								</div>
								<div layout="row"  class="pad64" ng-if="bCtrl.match_finished > 0">
									<canvas  class="chart chart-pie height100perc" chart-data="bCtrl.chart.winned_games.values" chart-labels="bCtrl.chart.winned_games.labels" chart-series="series" chart-click="onClick"></canvas>
								</div>
								<div layout="row"  class="pad64 md-body-2" ng-if="bCtrl.match_finished == 0" layout-align="center center">
									You didn' t completed any match yet
								</div>
							</div>
							
							<div layout="column" flex="45" class="mrg30 height500 whiteBg shadowed-box">
								<div layout="row" class="pad10" layout-align="center center">
									<h2 class="md-title">MOST FREQUENT FRIENDS</h2>
								</div>
								<div layout="row"  class="pad64">
									<canvas  id="pie" class="chart chart-pie height100perc" chart-data="bCtrl.chart.companions.values.played" chart-labels="bCtrl.chart.companions.labels"></canvas>
								</div>
								
							</div>
						</div>
						<div layout="row">
							<div layout="column" flex="45" class="mrg30 height500 whiteBg shadowed-box">
								<div layout="row" class="pad10" layout-align="center center">
									<h2 class="md-title">MATCHES STATUS</h2>
								</div>
								<div layout="row"  class="pad64">
									<canvas  class="chart chart-pie height100perc" chart-data="bCtrl.chart.match_status.values" chart-labels="bCtrl.chart.match_status.labels" chart-series="series" chart-click="onClick"></canvas>
								</div>
							</div>
							
							<div layout="column" flex="45" class="mrg30 height500 whiteBg shadowed-box">
								<div layout="row" class="pad10" layout-align="center center">
									<h2 class="md-title">MOST FREQUENT FRIENDS</h2>
								</div>
								<div layout="row"  class="pad64">
									<canvas  id="pie" class="chart chart-pie height100perc" chart-data="bCtrl.chart.companions.values.played" chart-labels="bCtrl.chart.companions.labels"></canvas>
								</div>
								
							</div>
						</div>
					</md-content>
				</md-tab>
			</md-tabs>
		</div>
	</div>
</div>
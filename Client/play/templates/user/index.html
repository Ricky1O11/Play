<div class="container-fluid  pad20t height100perc" layout="column" ng-cloak>
	<div layout="row" flex="none" class="height250 pad20l pad20r mrg10b mrg10r">
		<div layout="column" flex="none" layout-align="center center">
			<div layout="row" class="relative" flex="none">
				<div class="circleBase imgUser hideScrollbar shadowed-box"  ng-if="uCtrl.user.profile_details.image == ''">
					<div class="circleBase imgUser" layout-align="center center" " ng-style="randomColors[uCtrl.user.$id] || getRandomColor(uCtrl.user.$id)" alt="profile image">
						<div layout="column" layout-align="center center" class="height100perc white80perc size-128">{{uCtrl.user.username.substring(0,1).toUpperCase()}}</div>
					</div>
				</div>
				<div class="circleBase imgUser" layout-align="center center" alt="profile image" back-img="{{uCtrl.user.image}}" ng-if="uCtrl.user.image != ''">
					</div>
				<md-button 
					aria-label="Add friend" 
					class="md-fab md-primary absolute"
					ng-click="uCtrl.addFriend(uCtrl.user)"
					ng-if="!user.friends.outbound[uCtrl.user.$id] && !user.friends.inbound[uCtrl.user.$id]">
					<i class="icon-user-add size-18"></i>
					<md-tooltip md-direction="bottom" md-delay="200">Add friend</md-tooltip>
				</md-button>
				<md-button 
					aria-label="Remove friend"
					class="md-fab md-accent absolute"
					ng-click="uCtrl.removeFriend(uCtrl.user.$id)"
					ng-if="user.friends.outbound[uCtrl.user.$id] || 
							(user.friends.inbound[uCtrl.user.$id] && user.friends.inbound[uCtrl.user.$id].accepted)">
					
					<i class="icon-close-round size-18"></i>
					<md-tooltip md-direction="bottom" md-delay="200">Remove friend</md-tooltip>
				</md-button>
				<md-button 
					aria-label="Accept request"
					class="md-fab md-accent absolute"
					ng-click="acceptFriend(uCtrl.user.$id)"
					ng-if="user.friends.inbound[uCtrl.user.$id] && !user.friends.inbound[uCtrl.user.$id].accepted">
					
					<i class="icon-user-add size-18"></i>
					<md-tooltip md-direction="bottom" md-delay="200">Accept request</md-tooltip>
				</md-button>
			</div>
			<div layout="row" class="mrg10t blue-grey">
				<h1> {{uCtrl.user.username}}</h1>
			</div>
		</div>
		<div layout="column" class="blue-grey pad20l" flex="100">
			<div layout="row">
				<div layout="column" flex="100">
					<div layout="row" class="height30">
						<div layout="column" flex="90" layout-align="center start">
							<h3 class="blue-grey">Your stats</h3>
						</div>
						<div layout="column" flex="10" layout-align="center end">
							<h5 
								class="clickable" 
								md-colors="{color: 'myTheme-accent'}">
								VIEW ALL
							</h5>
						</div>
					</div>
					<div layout="row" class="size-14">
						<div 
							layout="column" 
							flex="33" 
							class="shadowed-box whiteBg pad10l height60 clickable">
							<div layout="row" class="height100perc">
								<div layout="column" flex="10" layout-align="center center" >
									<i class="size-24 icon-puzzle" md-colors="{color: 'myTheme-accent'}" >
										<md-tooltip md-direction="top" md-delay="200">Match played</md-tooltip>
									</i>
								</div>
								<div layout="column" flex="80" layout-align="center center" >
									<h2>{{uCtrl.user.match_played}} match played</h2>
								</div>
							</div>
						</div>
						<div 
							layout="column" 
							flex="33" 
							class="shadowed-box whiteBg pad10l height60 clickable mrg10l">
							<div layout="row" class="height100perc">
								<div layout="column" flex="20" layout-align="center center" >
									<i class="size-21 icon-trophy-2" md-colors="{color: 'myTheme-accent'}" >
										<md-tooltip md-direction="top" md-delay="200">Match won</md-tooltip>
									</i>
								</div>
								<div layout="column" flex="80" layout-align="center center" >
									<h2>{{uCtrl.user.match_won}} match won</h2>
								</div>
								
							</div>
						</div>
						<div 
							layout="column" 
							flex="33" 
							class="shadowed-box whiteBg pad10l height60 clickable mrg10l">
							<div layout="row" class="height100perc">
								<div layout="column" flex="20" layout-align="center center" >
									<i class="size-18 icon-hourglass" md-colors="{color: 'myTheme-accent'}" >
										<md-tooltip md-direction="top" md-delay="200">Minute played</md-tooltip>
									</i>
								</div>
								<div layout="column" flex="80" layout-align="center center" >
									<h2>{{bCtrl.boardgame.playingtime}} minute played</h2>
								</div>
							</div>	
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<md-tabs  md-selected="1" flex
	md-stretch-tabs="always" ng-if="uCtrl.user.visibility_group == 0 || (uCtrl.user.visibility_group == 1 && (user.friends.inbound[uCtrl.user.$id] || user.friends.outbound[uCtrl.user.$id]))">
		<md-tab label="Favourites" ng-if="uCtrl.user.fav_setting">
			<md-content class="pad5l pad10t">
				<div layout="row" layout-wrap>
					<div layout="column" class="pad20l pad20t clickable" flex="none" ng-repeat="(key,value) in uCtrl.user.favourites"
					ng-click="goTo('boardgames/'+key)">
						<div class="circleBase imgBoardgameProfile hideScrollbar shadowed-box">
							<div class="circleBase imgBoardgameProfile" layout-align="center center" back-img="{{value.image}}">
								<div class="circleBase" style="font-size:50px;"></div>
							</div>
						</div>
						<md-tooltip md-direction="bottom" md-delay="200">{{value.name}}</md-tooltip>
					</div>
					<div layout="column" layout-align="center center" ng-if="uCtrl.user.favourites.length == 0" flex="100">
					  	<div layout="row" class="size-72 mrg20b">:(</div>
					  	<div layout="row" class="mrg20b"><h1>He doesn't have any favourite game</h1></div>
					</div>
				</div>
			</md-content>
		</md-tab>
		<md-tab label="Stats">
			<md-content>
			</md-content>
		</md-tab>
		<md-tab label="Match played together">
			<md-content>
				<md-list-item
					class=" md-3-line animate-repeat whiteBg mrg5b mrg5r shadowed-box"						
					ng-repeat-start="boardgame in uCtrl.common_matches"
					ng-click="uCtrl.setVisible(boardgame.$id)" ng-if="boardgame.hasOwnProperty('matches')">
					<img ng-src="{{boardgame.thumbnail}}" class="md-avatar" alt="match {{boardgame.name}}" />
					<div layout="column">
						<div layout="row">
							<h3> {{boardgame.name}}</h3>
						</div>
						<div layout="row">
							<i>{{boardgame.matches | keylength}} matches</i>
						</div>
					</div>
					<i 
					ng-if="user.profile_details.favourites[boardgame.$id]"
					aria-label="remove favourite"
					class="icon-heart md-secondary" 
					md-colors="{color: 'myTheme-accent'}"
					ng-click="msCtrl.toggleFavourite(boardgame)"></i>
					<i 
					ng-if="!user.profile_details.favourites[boardgame.$id]" 
					aria-label="add favourite"
					class="icon-heart-o md-secondary"  
					md-colors="{color: 'myTheme-accent'}"
					ng-click="msCtrl.toggleFavourite(boardgame)"></i>
				</md-list-item>
			
				<md-list-item 
				ng-if="boardgame.visible && match.players[uCtrl.user.$id]"
				class=" md-3-line mrg50l whiteBg mrg5b mrg5r shadowed-box" ng-cloak						
				ng-repeat-end ng-repeat="match in boardgame.matches | orderObjectBy:'-time'"
				ng-href="#/matches/{{match.key}}"
				>

					<img ng-src="{{boardgame.thumbnail}}" class="md-avatar" alt="match {{boardgame.name}}" />
					<div layout="column">
						<div layout="row">
							<h3 ng-if="match.name.length == 0"> Match {{key}}</h3>
							<h3 ng-if="match.name.length > 0">{{match.name}}</h3>
						</div>
						<div layout="row" class="size-14">
							<i>{{match.time | date:"EEEE, MMMM d, y, H:mm in"}} {{match.location}}</i>
						</div>
					</div>
				</md-list-item>
		</md-list>
			</md-content>
		</md-tab>
	</md-tabs>
</div>
<div class="container-fluid pad20l pad20t pad20r height100perc" layout="column">
	<div layout="row" flex="none" class="height300 mrg10b mrg10r">
		<div layout="column" flex="none" class="relative" >
			<div class="circleBase imgBoardgame hideScrollbar shadowed-box">
				<div class="circleBase imgBoardgame" layout-align="center center" back-img="{{mCtrl.match.boardgame_details.img}}">
					<div class="circleBase" style="font-size:50px;"></div>
				</div>
			</div>

			<md-fab-speed-dial	
					md-open = "mCtrl.fabOpen"
					md-direction="left"
					class="absolute md-scale"
					ng-class="{'md-scale':!mCtrl.editMode}">
		        <md-fab-trigger>
		          <md-button ng-if="!mCtrl.editMode"
		          	ng-click="mCtrl.startEditMode($event)"
		          	aria-label="Edit match info" 
		          	class="md-fab">
		            <i class="icon-pencil">
		            </i>
		            <md-tooltip md-direction="bottom" md-delay="200">Edit match stats and user points</md-tooltip>
		          </md-button>
		          <md-button 
		        	  ng-if="mCtrl.editMode"
		          		aria-label="Confirm changes" 
		          		class="md-fab md-raised md-primary" 
						ng-click="mCtrl.endEditMode(true)">
		            <i class="icon-check-2"></i>
		          </md-button>
		        </md-fab-trigger>

		        <md-fab-actions>
		        	<md-button 
		          		aria-label="Discard changes" 
		          		class="md-fab md-raised md-mini" 
						ng-click="mCtrl.endEditMode(false)">
		            <i class="icon-close-round blue-grey"></i>
		          </md-button>
		          <md-button 
		          		aria-label="Delete match"
		          		class="md-fab md-raised md-mini md-accent"
						ng-click="mCtrl.deleteMatchPopup($event)">
		            	<i class="icon-trash"></i>
		          </md-button>
				</md-fab-actions>
			</md-fab-speed-dial>
		</div>
		<div layout="column" class="blue-grey pad20l" flex="100">
			<div layout="row" class="shadowed-box whiteBg pad20l mrg10b height60">
				<div ng-if="!mCtrl.editMode" layout="column" flex="70"  layout-align="center start">
					<h2 ng-if="mCtrl.match.name.length == 0"> Match {{mCtrl.match.pk}}</h2>
					<h2 ng-if="mCtrl.match.name.length > 0">{{mCtrl.match.name}}</h2>
				</div>
				<div ng-if="mCtrl.editMode" layout="column" flex="70">
					<md-input-container>
							<label class="size-18">Match name</label>
							<input ng-model="mCtrl.match.name">
					</md-input-container>
				</div>
				<div layout="column" flex="30"  layout-align="center end">
					<div layout="row">
						<md-button 
						ng-if="mCtrl.is('programmed')" 
						ng-class="mCtrl.statusColor">
							programmed
						</md-button>
						<md-button 
						ng-if="!mCtrl.is('programmed')" 
						ng-class="{
							'buttonDisabled' : !mCtrl.is('in progress'),
							'md-accent' : mCtrl.is('in progress')}"
						ng-click="mCtrl.setCompletionStatus(0)"
						>
							in progress
						</md-button>
						<md-button 
						ng-if="!mCtrl.is('programmed')" 
						ng-class="{
							'buttonDisabled' : mCtrl.is('in progress'),
							'md-primary' : !mCtrl.is('in progress')}"
						ng-click="mCtrl.setCompletionStatus(1)"
						>
							completed
						</md-button>
					</div>
				</div>
			</div>
			<div layout="row" id="info_container">
				<div layout="column" flex="100">
					<div layout="row" class="size-14 mrg10b">
						<div 
							layout="column" 
							flex="50" 
							class="shadowed-box whiteBg pad10l height60 clickable" 
							ng-click="goTo('boardgames/'+mCtrl.match.boardgame)">
							<div layout="row" class="height100perc">
								
								<div layout="column" flex="80" layout-align="center center" >
									<h3>{{mCtrl.match.boardgame_details.title}}</h3>
								</div>
								<div layout="column" flex="20" layout-align="center center" >
									<i class="size-18 icon-puzzle-piece" md-colors="{color: 'myTheme-accent'}" ></i>
								</div>
							</div>
						</div>

						<div layout="column" 
							flex="50" 
							class="shadowed-box whiteBg pad10l height60 clickable mrg10l">
							<div layout="row" class="height100perc">
								<div layout="column" flex="20" layout-align="center center" >
									<i class="size-18 icon-hourglass" md-colors="{color: 'myTheme-accent'}" ></i>
								</div>
								<div layout="column" flex="80" layout-align="center center" >
									<h3>{{mCtrl.match.duration | secondsToTime | date:'HH:mm:ss'}} min</h3>
								</div>
							</div>
						</div>
					</div>
					<div layout="row" class="size-14 mrg10b">
						<div layout="column" 
							flex="50" 
							class="shadowed-box whiteBg pad10l height60 clickable">
							<div layout="row" class="height100perc">
								<div ng-if="!mCtrl.editMode" layout="column" flex="80" layout-align="center center" >
									<h3>{{mCtrl.match.time | date: "short"}}</h3>
								</div>
								<div ng-if="mCtrl.editMode" layout="column" flex="80">
									<md-input-container>
										<label class="size-16">When?</label>
										<md-datepicker flex ng-model="mCtrl.match.time "></md-datepicker>
									</md-input-container>
								</div>
								<div layout="column" flex="20" layout-align="center center" >
									<i class="size-18 icon-calendar" md-colors="{color: 'myTheme-accent'}" ></i>
								</div>
							</div>
						</div>
						<div layout="column" 
							flex="50" 
							class="shadowed-box whiteBg pad10l height60 clickable mrg10l">
							<div layout="row" class="height100perc">
								<div layout="column" flex="20" layout-align="center center" >
									<i class="size-18 icon-pin" md-colors="{color: 'myTheme-accent'}" ></i>
								</div>
								<div ng-if="!mCtrl.editMode" layout="column" flex="80" layout-align="center center" >
									<h3>{{mCtrl.match.location}}</h3>
								</div>
								<div ng-if="mCtrl.editMode" layout="column" flex="80" >
									<md-input-container>
										<label class="size-16">Where?</label>
										<input ng-model="mCtrl.match.location">
									</md-input-container>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div layout="row" flex="none">
		<div layout="column" flex="100">
			<div layout="row" flex-sm="none">
				<h3 class="blue-grey">Leaderboard ({{mCtrl.match.plays_set.length}})</h3>
			</div>	
			<div layout="row" class="overflowScroll">			
					<md-list flex>
						<md-list-item
						class=" md-2-line animate-repeat whiteBg mrg5t mrg5r shadowed-box" 
						ng-repeat-start="play in mCtrl.match.plays_set | orderBy:'-points' "
						ng-click="mCtrl.setVisible(play.pk)">
							<div class="imgProfileMini circleBase borderWhite" layout-align="center center">
								<div class="circleBase" layout-align="center center" "  ng-style="randomColors[play.user_details.pk] || getRandomColor(play.user_details.pk)" alt="{{play.user_details.username}}">
									<div layout="column" layout-align="center center" class="height100perc white80perc size-18">{{play.user_details.username.substring(0,1).toUpperCase()}}</div>
								</div>
							</div>
							<!--<img ng-src="{{play.user_details.profile.img}}" class="md-avatar shadowed-box" ng-style="randomColors[play.user_details.pk] || getRandomColor(play.user_details.pk)" alt="{{play.user_details.username}}"/>-->
							<div layout="column">
								<div layout="row">
									<h3>{{play.user_details.username}}</h3>
								</div>
							</div>
							<div class="md-secondary">
								<strong>{{mCtrl.sumPoints(play.detailedPoints)}}</strong>
							</div>
							
						</md-list-item>
						<md-list-item layout="row" ng-repeat-end ng-repeat="dp in play.detailedPoints" ng-if="play.visible || mCtrl.allVisible"
						class="md-1-line animate-repeat whiteBg mrg5r shadowed-box">
							<div layout="row">
								{{dp.scoringField_details.word_details.word}}
							</div>
							
							<div class="md-secondary" ng-if="!mCtrl.editMode">
								{{dp.detailed_points}}
							</div>
							<div class="md-secondary" ng-if="mCtrl.editMode">
								<md-input-container class="detailedPointsContainer md-block" >
										<input type="number" ng-model="dp.detailed_points" aria-label="red" aria-controls="red-slider">
								</md-input-container>
							</div>
						</md-list-item>
				  </md-list>
				</div>
		</div>
	</div>
</div>